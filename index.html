<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link rel="stylesheet" href="style.css">
    <title>Pizza Cart with API</title>

</head>

<body>
    <div class="webBody">
        <header>
            <div class="logoContainer">
                <img class="logoImage" src="images/logo.jpg" alt="logo-pizza">
            </div>
            <div class="logoHeaders">
                <h1>Zandile's Perfect Pizza</h1>
                <h2 class="slogan">Grab a bite on the <strong>Go!!!</strong></h2>
            </div>
        </header>

        <hr>

        <main x-data="myJSFunctionality">
            <div class="myCart" x-cloak>
                <div>
                    Username <input type="text" x-model="username" placeholder="Enter Username">
                    <button @click="myLogin()" x-show="username && !myCartId">Login</button>
                    <button @click="myLogout()" x-show="username && myCartId">Logout</button>
                    <button @click="historyPizzas()" x-show="!displayHistory && cartID" class="orderHistory">Order
                        History</button>
                    <button @click="newOrder()" x-show="displayHistory" class="newOrder">Close Order History</button>

                </div>

                <!-- <div x-show="displayHistory">
                    <h1>ORDER HISTORY</h1>
                    <template x-for="cart in historyCartsIds">
                        <div x-init="getPastOrders(cart.cart_code)"></div>
                    </template><br>
                    <div> -->
        
                <!-- <div x-show="myCartId">
                    cart code <span x-text="myCartId"></span>
                </div> -->

                <div x-show="pizzasCart.length > 0"> <!-- -->
                    <h3>Pizza Cart</h3>
                    <h5>ORDER</h5>
                    <div>
                        <table class="myPizzaTable" border="1">
                            <thead>
                                <tr>
                                    <th>Flavour</th>
                                    <th>Size</th>
                                    <th>Price</th>
                                    <th>Qty</th>
                                    <th>Total</th>
                                </tr>
                            </thead>
                            <tbody>
                                <template x-for="pizza in pizzasCart">
                                    <tr>
                                        <td x-text="pizza.flavour"></td>
                                        <td x-text="pizza.size"></td>
                                        <td x-text="pizza.price"></td>
                                        <td>
                                            <button @click="addPizzaFunc(pizza.id)">+</button>
                                            x <span class="pizzaqty" x-text="pizza.qty"></span>
                                            <button @click="removePizzaFunc(pizza.id)">-</button>
                                        </td>
                                        <td>R<span x-text="pizza.total.toFixed(2)"></span> </td>
                                    </tr>
                                </template>

                                <tr>
                                    <td colspan="4">Total</td>

                                    <td colspan="2">R<span x-text="pizzasCartTotal.toFixed(2)"></span></td>
                                </tr>

                                <tr>
                                    <td colspan="3">Make Payment</td>
                                    <td>
                                        <input x-model="paymentAmount" type="text">
                                    </td>
                                    <td>
                                        <button @click="purchasePizza()">Pay</button>
                                    </td>
                                </tr>
                            </tbody>
                        </table>
                        <div class="myMessage" x-text="paymentMsg"></div>
                    </div>
                </div><br><br>

                <div class="pizzaListing" x-show="username && myCartId">
                    <template x-for="pizza in myPizzas">
                        <div class="eachPizza">

                            <h4 x-text="pizza.flavour"></h4><br>
                            <img class="pizzaImages" src="images/pizza.png" alt="pizza"><br>
                            <strong><span x-text="pizza.size"></span></strong><br><br>
                            <strong>R<span x-text="pizza.price"></span></strong><br><br>
                            <button class="btn" @click="addPizzaFunc(pizza.id)">Order Now</button>

                        </div>
                    </template>

                </div>
            </div>
        </main>
        <hr>
        <footer>
            <div class="contacts">
                <p>Contact Us&#58; (021)&ndash;541&ndash;1000</p>
                <p>Email: zandilepizza@outlook.com</p>
                <div class="mySocial">
                    <h4>Follow Us </h4>
                    <li>Facebook</li>
                    <li>Twitter</li>
                    <li>Instagram</li>
                </div>
            </div>

            <div class="address">
                <h3>Address</h3>
                <ul>
                    <li>Pizza Plaza</li>
                    <li>Dough Road</li>
                    <li>Base Town</li>
                    <li>7659</li>
                </ul>
            </div>
        </footer>
        <span>
            @JD Rantsho
        </span>

    </div>


    <script src="https://cdn.jsdelivr.net/npm/axios/dist/axios.min.js"></script>
    <script src="//unpkg.com/alpinejs" defer></script>
    <script src="index.js"></script>
    <script src="functionality.js"></script>
</body>

</html>